<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram</title>
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="shortcut icon" href="https://upload.wikimedia.org/wikipedia/commons/9/95/Instagram_logo_2022.svg" type="image/x-icon">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div id="firebaseui-auth-container"></div>
    <div id="app">
        <div class="modal">
            <div class="modal-content">
                <div class="Creat-post">
                    <span class="material-icons close-model">
                        close
                        </span>
<div class="add-media">
    <span class="post">Create new post</span>
<hr>
    <span class="material-icons media-id">
        collections
    </span>
        <span class="media-id first-font">Drag photos and videos here</span>
      <span class="media-id"><input type="file" id="files" multiple/></span> 
      <span class="media-id"><button id="send">Upload</button></span>
        
       <span class="media-id"><p id="uploading"></p></span> 
        <progress value="0" max="100" id="progress"></progress>
</div>
</div>

<div class="finalize-post">
    <button class="post diplayPostOnFeeds">Post</button>
   <div class="">
    <input type ="text" placeholder="add caption" class="file-caption"/>
   </div>
   <div class="picture-container">
    
    
   </div>
    
</div>
</div>
            </div>
       
        <div class="modal-1 post-Menu">
            <div class="modal-content-1">
                <div class="post-menu">
                    <button class="btn-menu top-btn"><span class="main-function">Edit</span></button>
                    <button class="btn-menu "><span class="main-function">Delete</span> </button>
                    <button class="btn-menu"><span>Add to favorite</span> </button>
                    <button class="btn-menu"><span>Go to post</span></button>
                    <button class="btn-menu"><span>Share to...</span> </button>
                    <button class="btn-menu"><span>Copy link</span> </button>
                    <button class="btn-menu ">   <span>Embed</span> </button>
                    <button class="btn-menu off-btn"> <span class="cancel post-menu-exit">Cancel</span> </button>
        
                 </div>
        </div>
        </div>
        <div class="left-sidebar box1">
            <span class="logo"><img src="https://www.vectorlogo.zone/logos/instagram/instagram-wordmark.svg" width="100px" height="50px"></span>
            <div class="left-nav">
        <div class="sidebar-item active">
                    <span class="material-icons  ">
                       home
                       </span> 
                   <span class="ul-p1">Home</span>
               </div>
               <div class="sidebar-item">
                   <span class="material-icons ">
                       search
                       </span> <span class="ul-p1">Search</span>
               
               </div>
               <div class="sidebar-item">
                   <span class="material-icons ">
                       explore
                       </span>
                   <span class="ul-p1">Explore</span>
                   
               </div>
               <div class="sidebar-item"><span class="material-icons ">
                movie
                 </span>
             <span class="ul-p1">Reel</span>
             </div>
             <div class="sidebar-item">
                <span class=" material-icons rotate-item">
               send
                 </span>
             <span class="ul-p1">Messages</span>
             </div>
               <div class="sidebar-item">
                <span class="material-icons">
                    favorite_border
                    </span>
                   <span class="ul-p1">
                      notifications
                   </span>
                   </div>
               <div class="sidebar-item open-modal"><span class="material-icons ">
                  add_box
                   </span>
               <span class="ul-p1 open-modal">Create</span>
               </div>
               <div class="sidebar-item"><span class="material-icons pro-pic ">
                <img src="asset/pexels-yiğit-melih-berber-14805059.jpg" width="30" height="30"></span>
                
            <span class="ul-p1">Profile</span>
            </div>
           
            <div class="sidebar-item menu clickedMenu  " ><span class="material-icons ">
                menu
                </span>
            <span class="ul-p1">More</span>
            </div>
               <div class="profile-menu main-form" id="myForm" main-form> 
                <div class="sidebar-item main-form "><span class="material-icons">
                    settings
                    </span>
                <span class="ul-p1">settings</span>
                </div>
                <div class="sidebar-item main-form"><span class="material-icons">
                    av_timer
                    </span>
                <span class="ul-p1">Your activity</span>
                </div>
                <div class="sidebar-item main-form"><span class="material-icons ">
                    bookmarks
                    </span>
                <span class="ul-p1">Saved</span>
                </div>
                <div class="sidebar-item main-form"><span class="material-icons">
                    keyboard_command_key
                    </span>
                <span class="ul-p1">Keyboard shortcuts</span>
                </div>
                <div class="sidebar-item main-form"><span class="material-icons">
                    light_mode
                    </span>
                <span class="ul-p1">Switch apperance</span>
                </div>
                <div class="sidebar-item main-form"><span class="material-icons">
                    report
                    </span>
                <span class="ul-p1">Report a problem</span>
                </div>
                <div class="sidebar-item main-form account-bar"> <span class="ul-p1">Switch accounts</span>
               
                </div>
                <div class="sidebar-item main-form  account-bar  "><span class="align-logout ">Log out</span>
                </span><p class="ul-p1 "></p>
                
                </div>
                <div class="sidebar-item logout-btn clickLogOut "><span class="material-icons ">
                    menu
                    </span> 
                <span class="ul-p1 ">More</span>
                </div>
                </div>
               </div>
               
            </div>
            
        <div class="section">
            <div class="main-menu box2">
                <div class="nav">
                    <div class="box2-profile">
                        
                        <span ><img src="asset/pexels-yiğit-melih-berber-14805059.jpg" width="55" height="55"></span>
                       
                    <span class="ul-p1 auth-user"></span>
                    </div>
                    <div class="box2-profile">
                        
                        <span ><img src="asset/pexels-yiğit-melih-berber-14805059.jpg" width="55" height="55"></span>
                       
                    <span class="ul-p1">Phumudzo</span>
                    </div>
                    <div class="box2-profile">
                        
                        <span  ><img src="asset/pexels-yiğit-melih-berber-14805059.jpg" width="55" height="55"></span>
                    <span class="ul-p1">Livhuwani</span>
                    </div>
                    <div class="box2-profile">
                        
                        <span ><img src="asset/pexels-yiğit-melih-berber-14805059.jpg" width="55" height="55"></span>
                       
                    <span class="ul-p1">Rendani</span>
                    </div>
                    <div class="box2-profile">
                        
                        <span ><img src="asset/pexels-yiğit-melih-berber-14805059.jpg" width="55" height="55"></span>
                       
                    <span class="ul-p1">Tendani</span>
                    </div>
                    <div class="box2-profile">
                        
                        <span ><img src="asset/pexels-yiğit-melih-berber-14805059.jpg" width="55" height="55"></span>
                       
                    <span class="ul-p1">Mavhungu</span>
                    </div>
                    <div class="box2-profile">
                        
                        <span ><img src="asset/x.jpg" width="55" height="55"></span>
                       
                    <span class="ul-p1">Ompha</span>
                    </div>
                    <div class="box2-profile">
                        
                        <span ><img src="asset/pexels-yiğit-melih-berber-14805059.jpg" width="55" height="55"></span>
                       
                    <span class="ul-p1">Lufuno</span>
                    </div>
                    
            
                </div>
                <div class="status">
                    <div class="status-bar">
                        <div class="status-bar1">
                            <span ><img src="asset/pexels-yiğit-melih-berber-14805059.jpg" width="40" height="40"></span>
                                <span class="auth-user"> . 19h</span>
                                
                        </div>
                        <div class="status-bar2-2">
                            <span class="material-icons open-modal-post-menu">
                                more_horiz
                                </span>
                        </div>
                       
                            </div>
                            <div class="photo">
                               <img src="asset/pexels-erik-mclean-9661427.jpg" width="410px" height="500px"> 
                            </div>
                            <div class="status-footer">
                                <div class="status-footer-1">
                                    <span class="material-icons">
                                        favorite_border
                                        </span>
                                        <span class="material-icons">
                                            mode_comment
                                            </span>
                                            <span class="material-icons">
                                                favorite_border
                                                </span>
                                        
                                </div>
                                <div class="status-footer-2">
                                    <span class="material-icons">
                                        bookmark
                                        </span>
                                        
                                        
                                </div>
                                
            
                            </div>
                            <div class="comment-section">
                                <div class="rnav-bar1">
                                    <span ><img src="asset/x.jpg" width="15" height="15"></span>
                                        <div class="profile-name">
                                            <span class="likes-comment">Liked by Shaun_ and others</span>
                                        </div>
                                        </div>
            <span class="likes-comment status-com auth-user"> Love </span>
            
            <div class="add-comment">
                <span class="likes-comment">Add a comment...</span>
                <span class="material-icons">
                    sentiment_satisfied_alt
                    </span>
            </div>
            
                            </div>
                            <br>
            <hr>
            
                            </div>
                            
                            <br><br><br><br>
            
                            <div class="status">
                                <div class="status-bar">
                                    <div class="status-bar1">
                                        <span ><img src="asset/pexels-marta-dzedyshko-2377470.jpg" width="40" height="40"></span>
                                            <span class="auth-user"> . 30h</span>
                                            
                                    </div>
                                    <div class="status-bar2-2">
                                        <span class="material-icons">
                                            more_horiz
                                            </span>
                                    </div>
                                   
                                        </div>
                                        <div class="photo">
                                            <img src="asset/pexels-marta-dzedyshko-2377470.jpg" width="410px" height="500px">
                                        </div>
                                        <div class="status-footer">
                                            <div class="status-footer-1">
                                                <span class="material-icons">
                                                    favorite_border
                                                    </span>
                                                    <span class="material-icons">
                                                        mode_comment
                                                        </span>
                                                        <span class="material-icons">
                                                            favorite_border
                                                            </span>
                                                    
                                            </div>
                                            <div class="status-footer-2">
                                                <span class="material-icons">
                                                    bookmark
                                                    </span>
                                                    
                                                    
                                            </div>
                                            
                        
                                        </div>
                                        <div class="comment-section">
                                            <div class="rnav-bar1">
                                                <span ><img src="asset/x.jpg" width="15" height="15"></span>
                                                    <div class="profile-name">
                                                        <span class="likes-comment">Liked by Shaun_ and others</span>
                                                    </div>
                                                    </div>
                        <span class="likes-comment status-com auth-user"> #flowers #nature #me </span>
                        
                        <div class="add-comment">
                            <span class="likes-comment">Add a comment...</span>
                            <span class="material-icons">
                                sentiment_satisfied_alt
                                </span>
                        </div>
                        
                                        </div>
                                        <br>
            <hr>
            <br>   
                                        </div>
                                        <br><br><br>  <br>   
                                        <div class="status open-status">
                                            <div class="status-bar">
                                                <div class="status-bar1">
                                                    <span ><img src="asset/pexels-yiğit-melih-berber-14805059.jpg" width="40" height="40"></span>
                                                        <span class="auth-user"> . 19h</span>
                                                        
                                                </div>
                                                <div class="status-bar2-2">
                                                    <span class="material-icons open-modal-post-menu">
                                                        more_horiz
                                                        </span>
                                                </div>
                                               
                                                    </div>
                                                    <div class="photo-uploading">
                                                        
                                                    </div><!--<img src="asset/pexels-erik-mclean-9661427.jpg" width="410px" height="500px">-->
                                                    <div class="status-footer">
                                                        <div class="status-footer-1">
                                                            <span class="material-icons">
                                                                favorite_border
                                                                </span>
                                                                <span class="material-icons">
                                                                    mode_comment
                                                                    </span>
                                                                    <span class="material-icons">
                                                                        favorite_border
                                                                        </span>
                                                                
                                                        </div>
                                                        <div class="status-footer-2">
                                                            <span class="material-icons">
                                                                bookmark
                                                                </span>
                                                                
                                                                
                                                        </div>
                                                        
                                    
                                                    </div>
                                                    <div class="comment-section">
                                                        <div class="rnav-bar1">
                                                            <span ><img src="asset/x.jpg" width="15" height="15"></span>
                                                                <div class="profile-name">
                                                                    <span class="likes-comment">Liked by Shaun_ and others</span>
                                                                </div>
                                                                </div>
                                    <span class="likes-comment status-com auth-user"> Love </span>
                                    
                                    <div class="add-comment">
                                        <span class="likes-comment">Add a comment...</span>
                                        <span class="material-icons">
                                            sentiment_satisfied_alt
                                            </span>
                                    </div>
                                    
                                                    </div>
                                                    <br>
                                    <hr>
                                    
                                                    </div>
                                                    
                                                    
                        </div>
                <div class="right-nav box3">
                <div class="status-bar-rnav p1">
               
                    <div class="rnav-bar1">
                        <span ><img src="asset/x.jpg" width="40" height="40"></span>
                            <div class="profile-name">
                                <span>username:</span>
                                <span class="auth-user"></span>
                            </div>
                            </div>  
                    <div class="status-bar2">
                      <p class="logout">Log out</p>
                    </div>
                 </div>
            
            <br><br>
                 <div class="status-bar-rnav">
                    <div class="rnav-bar1-r1">
                        <p>Suggested for you</p>
                            </div>
                    <div class="status-bar2">
                      <h5>See All</h5>
                    </div>
                 </div>
            
                 <div class="status-bar-rnavrnav-bar1-r1">
                    <div class="rnav-bar1">
                        <span ><img src="asset/x.jpg" width="40" height="40"></span>
                            <div class="profile-name">
                                <span>Blue</span>
                                <span class="text-suggested">New to Instagram</span>
                            </div>
                            </div>
                    <div class="status-bar2">
                        <p>Follow</p>
                    </div>
                 </div>
                 <div class="status-bar-rnavrnav-bar1-r1">
                    <div class="rnav-bar1">
                        <span ><img src="asset/x.jpg" width="40" height="40"></span>
                            <div class="profile-name">
                                <span>John_Sky</span>
                                <span class="text-suggested">Suggested for you</span>
                            </div>
                            </div>
                    <div class="status-bar2">
                        <p>Follow</p>
                    </div>
                 </div>
                 <div class="status-bar-rnavrnav-bar1-r1">
                    <div class="rnav-bar1">
                        <span ><img src="asset/x.jpg" width="40" height="40"></span>
                            <div class="profile-name">
                                <span>Fortune_king</span>
                                <span>New to Instagram</span>
                            </div>
                            </div>
                    <div class="status-bar2">
                        <p>Follow</p>
                    </div>
                 </div>
                 <div class="status-bar-rnavrnav-bar1-r1">
                    <div class="rnav-bar1">
                        <span ><img src="asset/x.jpg" width="40" height="40"></span>
                            <div class="profile-name">
                                <span>Grey_hoper</span>
                                <span class="text-suggested">Followed by Mash + 2...</span>
                            </div>
                            </div>
                    <div class="status-bar2">
                        <p>Follow</p>
                    </div>
                 </div>
                 <div class="status-bar-rnavrnav-bar1-r1">
                    <div class="rnav-bar1">
                        <span ><img src="asset/x.jpg" width="40" height="40"></span>
                            <div class="profile-name">
                                <span>BlackJ</span>
                                <span class="text-suggested">Suggested for you</span>
                            </div>
                            </div>
                    <div class="status-bar2">
                      <p>Follow</p>
                    </div>
                 </div>
            <div class="footer">
                <div class="div">
                    <ul>
                        <span> About</span>
                        <span>. Help</span>
                        <span>. Press</span>
                        <span>. API</span>
                        <span>. Jobs</span>
                        <span>. Privacy</span>
                        <span>. Terms</span>
                        <span>. Locations</span>
                        <span>. Language</span>
                        <span>. Meta Verified</span>
                </ul>
                </div>
               <p>INSTAGRAM clone </p>
            </div>
            </div>
        </div>
    
    </div>
        

        
        <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
 <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
 <script defer src="https://www.gstatic.com/firebasejs/8.6.1/firebase-storage.js"></script> 
<script type="module" >
 // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyCQKhWk-P66NEiwI6_pvqU6FEhxjWPH7CE",
      authDomain: "instagram-clone-e08f4.firebaseapp.com",
      projectId: "instagram-clone-e08f4",
      storageBucket: "instagram-clone-e08f4.appspot.com",
      messagingSenderId: "1025129653151",
      appId: "1:1025129653151:web:7e5cb4f73eb3da0136d3aa",
      measurementId: "G-Q37P6QW7DX"
    };
  // Initialize Firebase
 // Initialize Firebase
 firebase.initializeApp(firebaseConfig); 
 const auth= firebase.auth();
 console.log(auth);
// Initialize Cloud Firestore and get a reference to the service
const db = firebase.firestore();
console.log(db);
// Initialize Cloud Storage and get a reference to the service
const storage = firebase.storage();
console.log(storage);
 //console.log(storage); 
class Profile{
    constructor(){
this.$form=document.getElementById("myForm");
this.$clickedMenu = document.querySelector(".clickedMenu");
this.$clickLogout = document.querySelector(".clickLogOut");
//create post -upload files
this.$modal = document.querySelector(".modal");
    this.$modalForm=document.querySelector(".modal-form");
    this.$createPost=document.querySelector(".open-modal");
//open-status variable
this.$openstatus=document.querySelector(".open-status");
this.$clickOpenStatus=document.querySelector(".diplayPostOnFeeds");
    //post menu
    this.$modalOpenPostModel = document.querySelector(".open-modal-post-menu");
    this.$PostMenuModalForm=document.querySelector(".post-Menu");
    this.$closePostMenuModel=document.querySelector(".post-menu-exit");
    this.$closeModal=document.querySelector(".close-model");
//finalize post{
    this.$FinalizePost=document.querySelector(".finalize-post");
    this.$imageDiv=document.querySelector(".picture-container");
    //uploading-photo variable
    this.$postOnFeedImageDiv=document.querySelector(".photo-uploading");
    //opens app div after login 
    this.$firebaseAuthContainer=document.querySelector("#firebaseui-auth-container");
     this.$app =document.querySelector("#app");
this.$app.style.display="none";
//variables for creating a uploading files
this.$progress=document.getElementById("progress");
this.$uploadFile=document.getElementById("send");
this.$getFile=document.getElementById("files");
//access of firebase login interface variable
this.$modalForm=document.querySelector(".modal-form");
this.$logOutButton =document.querySelector(".logout");
this.$authUserText = document.querySelectorAll(".auth-user");
this.ui = new firebaseui.auth.AuthUI(auth);
     this.$firebaseAuthContainer=document.querySelector("#firebaseui-auth-container");
     this.userId="";
     
    this.handleAuth();
     this.addEventListeners();
     this.files =[];
    }
     addEventListeners(){
    
 // Declare files as a property of the class
this.$getFile.addEventListener("change", (e) =>{
// the event listener for file input
       this.files= e.target.files;
         console.log("Files selected:", this.files);
         });
this.$uploadFile.addEventListener("click",  () =>{ 
            //check if the files are selected  
     if (this.files.length!=0){
         //loop through all the selected files
         for(let i=0;i<this.files.length;i++){
      //create a storage reference
              var storageRef = firebase.storage().ref(this.files[i].name);
       //upload files
             var upload = storageRef.put(this.files[i]);
             //update progress bar
             upload.on(
      "state_changed",
      (snapshot) => {
        var percentage =(snapshot.bytesTransferred / snapshot.totalBytes) * 100;
        this.$progress.value = percentage;
      // var storageRef = firebase.storage().ref('images/');
         console.log("HI,storage");
         storageRef.getDownloadURL().then((url)=>{
             console.log(url);
             const images=document.createElement("img");
             this.$imageDiv.style.width="400px";
this.$imageDiv.style.height="400px";
//this.$imageDiv.style.backgroundRepeat="no-repeat";
 images.src=url;
this.$imageDiv.appendChild(images);

this.$postOnFeedImageDiv.appendChild(images);
this.$postOnFeedImageDiv.style.width=" 30vw";
this.$postOnFeedImageDiv.style.height="40vh";
this.$postOnFeedImageDiv.style.marginTop= "10px";
this.$postOnFeedImageDiv.style.backgroundRepeat="no-repeat";
this.finalizePost()
          // 'file' comes from the Blob or File API
ref.put(this.files).then((snapshot) => {
  console.log('Uploaded  file!');
 
});

     })
         .catch (function(error){
             console.log("error encountered");  
         });
      } )
         }
         }
         
         
      });
        this.$clickedMenu.addEventListener("click",(event) =>{
          this.openForm() ;
        });

//log out of firebase
        this.$clickLogout.addEventListener("click",(event) =>{
            console.log("logout")
            this.closeForm() ;
        });
        
        this.$logOutButton.addEventListener("click",(event) =>{
        this.handleLogOut();
    });
    //callback function for uploading files
    this.$createPost.addEventListener("click",(event) =>{
        this.openCreatPost();
        console.log("create post")
    });
    this.$closeModal.addEventListener("click",(event) =>{
        this.closeModal();
        console.log("close modal")
    });
//callback to click post menu
    this.$modalOpenPostModel.addEventListener("click",(event) =>{
       console.log("clicked post menu")
        this.openPostMenuForm();
    });
//callback to click to close post menu
    this.$closePostMenuModel.addEventListener("click",(event) =>{
       console.log("clicked close post menu");
        this.closePostMenuform();
    });
    this.$clickOpenStatus.addEventListener("click",(event) =>{
        console.log("open status");
        this.openLoadedStatus();
    });
    }
    //
    openLoadedStatus(){
        this.$openstatus.style.visibility="visible";
        this.$modal.style.visibility="hidden";
        this.$FinalizePost.style.visibility = "hidden";
        console.log("posted on feed");
    }
    //open menu form
 openForm() {
        this.$form.style.visibility = "visible";
        this.$clickedMenu.style.visibility = "hidden";
        this.$FinalizePost.style.visibility = "hidden";
      }
      //close menu form
      closeForm() {
        this.$form.style.visibility= "hidden";
        this.$clickedMenu.style.visibility = "visible";
      }
//main menu 
openCreatPost(){
    this.$modal.style.visibility= "visible";
}
//finalize post function
finalizePost(){
    this.$FinalizePost.style.visibility= "visible";
  
}
closeModal(){
    this.$modal.style.visibility= "hidden";  
}
//post menu
openPostMenuForm(){
    this.$PostMenuModalForm.style.visibility= "visible";
}

closePostMenuform(){
    this.$PostMenuModalForm.style.visibility= "hidden";  
}
//callback to signing out user
handleLogOut(){
    firebase.auth().signOut().then(() => {
  // Sign-out successful.
    this.redictTOAuth();
}).catch((error) => {
  console.log("error accrred",error);
});
}
handleAuth(){
    firebase.auth().onAuthStateChanged((user) => {
        
        if (user) {
   // duplicate username to html class="auth-user"
   this.userId = user.uid;
   const username=user.displayName;
            this.$authUserText.forEach((element) => {
                element.innerHTML = username;});

              console.log(user);
         // this.$authUserText.innerHTML=user.displayName;
         this.redirectToApp();
       } else {
        this.redictTOAuth();
    }
     });
}


redictTOAuth(){
 this.$firebaseAuthContainer.style.display="block";
  this.$app.style.display="none";
   this.ui.start('#firebaseui-auth-container', {
    callbacks: {
    signInSuccessWithAuthResult: function(authResult, redirectUrl) {
      // User successfully signed in.
      // Return type determines whether we continue the redirect automatically
      // or whether we leave that to developer to handle.
     // this.userId=authResult.user;
     console.log("authResult",authResult.user);
     this.userId=authResult.user;
          this.$authUserText.innerHTML=user.displayName;
         this.redirectToApp();
     
      return true;
    }
    },
        signInOptions: [
         firebase.auth.EmailAuthProvider.PROVIDER_ID,
         firebase.auth.GoogleAuthProvider.PROVIDER_ID,
        ],
          // Other config options...
     });
}
redirectToApp(){
   this.$firebaseAuthContainer.style.display="none";
   this.$app.style.display="block";
   
}
}
const profile=new Profile() ;
  </script>
  
</body>
</html>
